(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{131:function(e,t){},137:function(e,t,a){},263:function(e,t,a){},275:function(e,t){},277:function(e,t){},292:function(e,t){},332:function(e,t){},334:function(e,t){},366:function(e,t){},367:function(e,t){},372:function(e,t){},374:function(e,t){},381:function(e,t){},400:function(e,t){},476:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(253),o=a(136),i=a(5),r=(a(263),a(137),a(254)),s=a.n(r),l=a(6),d=a(13),u={};u.email=Object({NODE_ENV:"production",PUBLIC_URL:"/reactJWT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JWT:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e",REACT_APP_GOOGLE_CLIENTID:"796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com",REACT_APP_FIREBASE:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo"}).REACT_APP_GOOGLE_EMAIL,u.key=Object({NODE_ENV:"production",PUBLIC_URL:"/reactJWT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JWT:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e",REACT_APP_GOOGLE_CLIENTID:"796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com",REACT_APP_FIREBASE:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo"}).REACT_APP_GOOGLE_KEY,u.spreadsheetId=Object({NODE_ENV:"production",PUBLIC_URL:"/reactJWT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JWT:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e",REACT_APP_GOOGLE_CLIENTID:"796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com",REACT_APP_FIREBASE:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo"}).REACT_APP_GOOGLE_SHEET;var p=new(0,a(264).GoogleSpreadsheet)(u.spreadsheetId);function b(){var e=new Date;e.setUTCHours(e.getUTCHours());var t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0"),c=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear().toString().slice(-2);return"".concat(t,":").concat(a," ").concat(c,"/").concat(n,"/").concat(o)}function j(){return(j=Object(d.a)(Object(l.a)().mark((function e(t){var a,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.useServiceAccountAuth({client_email:u.email,private_key:u.key});case 3:return e.next=5,p.loadInfo();case 5:return a=p.sheetsByIndex[0],c={Email:t.email,DateISO:b(),Nome:t.name},console.log(c),e.next=10,a.addRow(c);case 10:if(!e.sent){e.next=13;break}return e.abrupt("return",!0);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log("erro inserindo sheet"),console.log(e.t0.message),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var O=function(e){return j.apply(this,arguments)},f=a(94),g=a.n(f),h={homepage:"https://rslgp.github.io/reactJWT/#",loginPage:"auth/login",profilePage:"page",publicProfilePage:"profile/:profile_id"},v=h,_=a(461),m={jwt:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e"},E="access_token",x={getSessionData:function(){try{var e=g.a.get(E);if(!e)throw new Error("No Auth Cookie");var t=_.verify(e,m.jwt);if(t.exp&&t.exp<Date.now()/1e3)throw this.removeSessionData(),new Error("Token Expired");return t}catch(a){return console.log(a.message),window.location.href=v.homepage+"/"+v.loginPage,null}},saveSessionData:function(e){var t={email:e.email,exp:Math.floor(Date.now()/1e3)+7200},a=_.sign(t,m.jwt);g.a.set(E,a,{expires:1/24})},removeSessionData:function(){g.a.remove(E)}},S=a(9),P="796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com";var T=function(){return Object(S.jsxs)("div",{className:"GoogleLogin",children:[Object(S.jsx)("button",{onClick:function(){x.saveSessionData({email:"teste"})},children:"TESTE"}),Object(S.jsx)(s.a,{clientId:P,buttonText:"Continue with Google",onSuccess:function(e){console.log(e),O(e.profileObj)?alert("Ponto registrado"):alert("Falha no ponto"),x.saveSessionData(e.profileObj),v.profileData=e.profileObj,window.location.href=v.homepage+"/"+v.profilePage},onFailure:console.log,cookiePolicy:"single_host_origin"}),Object(S.jsx)("button",{onClick:function(){x.getSessionData()&&(window.location.href=v.homepage+"/"+v.profilePage)},children:"TESTE2"})]})};var A=function(){return Object(S.jsxs)("div",{className:"Header",children:[Object(S.jsx)("div",{className:"espacamento"}),Object(S.jsx)("h1",{children:"Bater ponto na ECS"}),Object(S.jsx)("div",{className:"espacamento"})]})};var C=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(A,{}),Object(S.jsx)(T,{})]})},w=a(12),D=a(255),I=Object(D.a)({apiKey:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo",authDomain:"myapp-d87de.firebaseapp.com",projectId:"myapp-d87de",storageBucket:"myapp-d87de.appspot.com",messagingSenderId:"101658274836",appId:"1:101658274836:web:364eb204ab277197d30b01"}),R=a(29),k=Object(R.b)(I);function L(e){for(var t=0,a=0;a<e.length;a++){t=(t<<5)-t+e.charCodeAt(a)}return Math.abs(t)}var y=function(){var e=Object(c.useState)(null),t=Object(w.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){!function(){var e=x.getSessionData();if(e){var t=e.email,a=btoa(t),c="users/"+a,o=Object(R.c)(k,c);Object(R.a)(o).then((function(e){if(e.exists()){var c=e.val();n(c)}else{console.log("No data available");var i={email:t,name:v.profileData.name,profilePictureUrl:v.profileData.imageUrl,public_id:L(i.email)};Object(R.d)(o,i);var r=Object(R.c)(k,"public_users/"+i.public_id);Object(R.d)(r,{id:a}),n(i)}})).catch((function(e){console.error("Error fetching data:",e)}))}}()}),[]),Object(S.jsx)("div",{children:a?Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Profile Information"}),Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Name:"})," ",a.name]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Email:"})," ",a.email]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Public Id:"})," ",Object(S.jsx)("a",{href:v.homepage+"/"+v.publicProfilePage+"/"+a.public_id,children:a.public_id})]}),Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:a.profilePictureUrl,alt:"Profile",style:{maxWidth:"100px",maxHeight:"100px"}})})]}):Object(S.jsx)("p",{children:"Loading profile data..."})})},W=a(256),N=["email"],H=Object(R.b)(I),G=function(){var e=Object(i.o)().profile_id,t=Object(c.useState)(null),a=Object(w.a)(t,2),n=a[0],o=a[1];return Object(c.useEffect)((function(){!function(){var t="public_users/"+e,a=Object(R.c)(H,t);Object(R.a)(a).then((function(e){if(e.exists()){var t="users/"+e.val().id,a=Object(R.c)(H,t);Object(R.a)(a).then((function(e){if(e.exists()){var t=e.val(),a=(t.email,Object(W.a)(t,N));o(a)}else console.log("No data available")})).catch((function(e){console.error("Error fetching data:",e)}))}else console.log("No data available")})).catch((function(e){console.error("Error fetching data:",e)}))}()}),[]),Object(S.jsx)("div",{children:n?Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Profile Information"}),Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Name:"})," ",n.name]}),Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:n.profilePictureUrl,alt:"Profile",style:{maxWidth:"100px",maxHeight:"100px"}})})]}):Object(S.jsx)("p",{children:"Loading profile data..."})})};""===window.location.hash&&(window.location.hash="/");var Y=Object(o.a)([{path:"/",element:Object(S.jsx)(C,{})},{path:v.loginPage,element:Object(S.jsx)(C,{})},{path:v.profilePage,element:Object(S.jsx)(y,{})},{path:v.publicProfilePage,element:Object(S.jsx)(G,{})}]);n.createRoot(document.getElementById("root")).render(Object(S.jsx)(c.StrictMode,{children:Object(S.jsx)(i.b,{router:Y})}))}},[[476,1,2]]]);
//# sourceMappingURL=main.eaf83f6e.chunk.js.map