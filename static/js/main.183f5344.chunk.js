(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{131:function(e,t){},136:function(e,t,n){},262:function(e,t,n){},274:function(e,t){},276:function(e,t){},291:function(e,t){},331:function(e,t){},333:function(e,t){},365:function(e,t){},366:function(e,t){},371:function(e,t){},373:function(e,t){},380:function(e,t){},399:function(e,t){},475:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(252),c=n(255),r=n(5),i=(n(262),n(136),n(253)),s=n.n(i),l=n(6),p=n(13),u={};u.email=Object({NODE_ENV:"production",PUBLIC_URL:"/reactJWT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JWT:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e",REACT_APP_GOOGLE_CLIENTID:"796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com",REACT_APP_FIREBASE:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo"}).REACT_APP_GOOGLE_EMAIL,u.key=Object({NODE_ENV:"production",PUBLIC_URL:"/reactJWT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JWT:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e",REACT_APP_GOOGLE_CLIENTID:"796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com",REACT_APP_FIREBASE:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo"}).REACT_APP_GOOGLE_KEY,u.spreadsheetId=Object({NODE_ENV:"production",PUBLIC_URL:"/reactJWT",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_JWT:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e",REACT_APP_GOOGLE_CLIENTID:"796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com",REACT_APP_FIREBASE:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo"}).REACT_APP_GOOGLE_SHEET;var d=new(0,n(263).GoogleSpreadsheet)(u.spreadsheetId);function b(){var e=new Date;e.setUTCHours(e.getUTCHours());var t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),o=(e.getMonth()+1).toString().padStart(2,"0"),c=e.getFullYear().toString().slice(-2);return"".concat(t,":").concat(n," ").concat(a,"/").concat(o,"/").concat(c)}function O(){return(O=Object(p.a)(Object(l.a)().mark((function e(t){var n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.useServiceAccountAuth({client_email:u.email,private_key:u.key});case 3:return e.next=5,d.loadInfo();case 5:return n=d.sheetsByIndex[0],a={Email:t.email,DateISO:b(),Nome:t.name},console.log(a),e.next=10,n.addRow(a);case 10:if(!e.sent){e.next=13;break}return e.abrupt("return",!0);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log("erro inserindo sheet"),console.log(e.t0.message),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var g=function(e){return O.apply(this,arguments)},f=n(94),j=n.n(f),h={homepage:"https://rslgp.github.io/reactJWT/#",baseURL:""};h.loginPage=h.baseURL+"auth/login",h.profilePage=h.baseURL+"page";var v=h,E=n(460),_={jwt:"cc87fcfd48930cc25795524677a7033fab8a9b2b012c58956a001244c4a6c32e"},S="access_token",m={getSessionData:function(){try{var e=j.a.get(S);if(!e)throw new Error("No Auth Cookie");var t=E.verify(e,_.jwt);if(t.exp&&t.exp<Date.now()/1e3)throw this.removeSessionData(),new Error("Token Expired");return t}catch(n){return console.log(n.message),window.location.href=v.loginpage,null}},saveSessionData:function(e){var t={email:e.email,exp:Math.floor(Date.now()/1e3)+7200},n=E.sign(t,_.jwt);j.a.set(S,n,{expires:1/24})},removeSessionData:function(){j.a.remove(S)}},T=n(11),x="796862051841-u21s62ekivlponlpdd3vlbkbuh6vln8g.apps.googleusercontent.com";var P=function(){return Object(T.jsxs)("div",{className:"GoogleLogin",children:[Object(T.jsx)("button",{onClick:function(){m.saveSessionData({email:"teste"})},children:"TESTE"}),Object(T.jsx)(s.a,{clientId:x,buttonText:"Continue with Google",onSuccess:function(e){console.log(e),g(e.profileObj)?alert("Ponto registrado"):alert("Falha no ponto"),m.saveSessionData(e.profileObj),v.profileData=e.profileObj,window.location.href=v.homepage+"/"+v.profilePage},onFailure:console.log,cookiePolicy:"single_host_origin"}),Object(T.jsx)("button",{onClick:function(){m.getSessionData()&&(window.location.href=v.homepage+"/"+v.profilePage)},children:"TESTE2"})]})};var A=function(){return Object(T.jsxs)("div",{className:"Header",children:[Object(T.jsx)("div",{className:"espacamento"}),Object(T.jsx)("h1",{children:"Bater ponto na ECS"}),Object(T.jsx)("div",{className:"espacamento"})]})};var C=function(){return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(A,{}),Object(T.jsx)(P,{})]})},w=n(12),D=n(254),R=Object(D.a)({apiKey:"AIzaSyCdMWZ25HYgn5YeXOLY6Ogw9qwpxJP4Cpo",authDomain:"myapp-d87de.firebaseapp.com",projectId:"myapp-d87de",storageBucket:"myapp-d87de.appspot.com",messagingSenderId:"101658274836",appId:"1:101658274836:web:364eb204ab277197d30b01"}),I=n(50),L=Object(I.b)(R);var k=function(){var e=Object(a.useState)(null),t=Object(w.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){!function(){var e=m.getSessionData();if(e){var t=e.email,n=btoa(t),a="users/"+n,c=Object(I.c)(L,a);L.goOnline(),Object(I.a)(c).then((function(e){if(e.exists()){var a=e.val();o(a)}else{console.log("No data available");var r={email:t,name:v.profileData.name,profilePictureUrl:v.profileData.imageUrl};Object(I.d)(c,r);var i=function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n);return Math.abs(t)}(r.email);r.public_id=i;var s=Object(I.c)(L,"public_users/"+i);Object(I.d)(s,{id:n}),o(r)}})).catch((function(e){console.error("Error fetching data:",e)})),L.goOffline()}}()}),[]),Object(T.jsx)("div",{children:n?Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{children:"Profile Information"}),Object(T.jsxs)("div",{children:[Object(T.jsx)("strong",{children:"Name:"})," ",n.name]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("strong",{children:"Email:"})," ",n.email]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("strong",{children:"Public Id:"})," ",n.public_id]}),Object(T.jsx)("div",{children:Object(T.jsx)("img",{src:n.profilePictureUrl,alt:"Profile",style:{maxWidth:"100px",maxHeight:"100px"}})})]}):Object(T.jsx)("p",{children:"Loading profile data..."})})},y=Object(c.a)([{path:"/",element:Object(T.jsx)(C,{})},{path:v.loginPage,element:Object(T.jsx)(C,{})},{path:v.profilePage,element:Object(T.jsx)(k,{})}]);o.createRoot(document.getElementById("root")).render(Object(T.jsx)(a.StrictMode,{children:Object(T.jsx)(r.b,{router:y})}))}},[[475,1,2]]]);
//# sourceMappingURL=main.183f5344.chunk.js.map