{"version":3,"sources":["components/func/saveToGoogleSheets.js","components/func/GlobalVariables.js","components/func/JWT_AUTH.js","components/Login.js","components/Header.js","App.js","components/func/firebase_setup.js","components/Page.js","components/PublicPage.js","index.js"],"names":["credentials","email","process","REACT_APP_GOOGLE_EMAIL","key","REACT_APP_GOOGLE_KEY","spreadsheetId","REACT_APP_GOOGLE_SHEET","doc","GoogleSpreadsheet","require","getLocalDate","currentDate","Date","setUTCHours","getUTCHours","hours","getHours","toString","padStart","minutes","getMinutes","day","getDate","month","getMonth","year","getFullYear","slice","concat","_saveToGoogleSheets","_asyncToGenerator","_regeneratorRuntime","mark","_callee","profileObj","sheet","row","wrap","_context","prev","next","useServiceAccountAuth","client_email","private_key","loadInfo","sheetsByIndex","Email","DateISO","Nome","name","console","log","addRow","sent","abrupt","t0","message","stop","apply","arguments","saveToGoogleSheets","_x","GlobalVariables","jwt","cookieName","JWT_AUTH","getSessionData","token","Cookies","get","Error","client","verify","exp","now","this","removeSessionData","e","window","location","href","homepage","loginPage","saveSessionData","clientData","data","Math","floor","sign","set","expires","remove","Login","_jsxs","className","children","_jsx","onClick","GoogleLogin","clientId","buttonText","onSuccess","googleResponse","alert","profileData","profilePage","onFailure","cookiePolicy","Header","App","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getDatabase","Page","_useState","useState","_useState2","_slicedToArray","userData","setUserData","useEffect","id","btoa","userPath","userRef","ref","then","snapshot","exists","val","profilePictureUrl","imageUrl","public_id","hash","i","length","charCodeAt","abs","emailToHash","publicRef","catch","error","getData","publicProfilePage","src","alt","style","maxWidth","maxHeight","profile_id","useParams","publicUserPath","publicUserRef","otherprops","_objectWithoutProperties","_excluded","router","createHashRouter","path","element","PublicPage","ReactDOM","document","getElementById","render","React","RouterProvider"],"mappings":"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","file":"static/js/main.499f7318.chunk.js","sourcesContent":["var credentials = {}\ncredentials.email = process.env.REACT_APP_GOOGLE_EMAIL;\ncredentials.key = process.env.REACT_APP_GOOGLE_KEY;\ncredentials.spreadsheetId = process.env.REACT_APP_GOOGLE_SHEET;\n//console.log(process.env);\n//console.log(credentials.key);\n//console.log(process.env.REACT_APP_GOOGLE_KEY);\n\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\n\n// Google Sheets Document ID -- PROD\nconst doc = new GoogleSpreadsheet(credentials.spreadsheetId);\n\nfunction getLocalDate(){\n  // Create a new Date object\n  const currentDate = new Date();\n\n  // Adjust the time zone offset to GMT+3 (EEST)\n  currentDate.setUTCHours(currentDate.getUTCHours());\n\n  // Format the date as a string in ISO format\n  //const isoDateGMTPlus3 = currentDate.toISOString();\n\n  const hours = currentDate.getHours().toString().padStart(2, '0');\n  const minutes = currentDate.getMinutes().toString().padStart(2, '0');\n  const day = currentDate.getDate().toString().padStart(2, '0');\n  const month = (currentDate.getMonth() + 1).toString().padStart(2, '0'); // Months are 0-based\n  const year = currentDate.getFullYear().toString().slice(-2);\n\n  const formattedDate = `${hours}:${minutes} ${day}/${month}/${year}`;\n  return formattedDate;\n\n}\n\nasync function saveToGoogleSheets(profileObj) {\n  try{\n    await doc.useServiceAccountAuth({\n        client_email: credentials.email,\n        private_key: credentials.key,\n    });\n\n    await doc.loadInfo(); // Loads document properties and worksheets\n\n    const sheet = doc.sheetsByIndex[0];\n    \n    const row = { Email: profileObj.email, DateISO: getLocalDate(), Nome: profileObj.name};\n    console.log(row);\n    var GoogleSpreadsheetRowInserted = await sheet.addRow(row);\n    if(GoogleSpreadsheetRowInserted) return true;\n  }catch(e){\n      console.log(\"erro inserindo sheet\");\n      console.log(e.message)\n      return false;\n  }\n}\n\nexport default saveToGoogleSheets;\n","const GlobalVariables = {}\nGlobalVariables.homepage=\"https://rslgp.github.io/reactJWT/#\";\nGlobalVariables.loginPage=\"auth/login\";\nGlobalVariables.profilePage=\"page\";\nGlobalVariables.publicProfilePage=\"profile/:profile_id\";\nexport default GlobalVariables;","import Cookies from \"js-cookie\";\nimport GlobalVariables from \"./GlobalVariables\";\nvar jwt = require(\"jsonwebtoken\");\n\nvar credentials = {}\ncredentials.jwt = process.env.REACT_APP_JWT;\n\nconst cookieName = \"access_token\";\nconst expirationHours=1;\n\nconst JWT_AUTH = {\n  getSessionData: function () {\n    try {\n        var token = Cookies.get(cookieName);\n        if (!token) {\n            // Token is not present\n            throw new Error('No Auth Cookie');\n        }\n        var client = jwt.verify(token, credentials.jwt);\n\n        // Check if token has expired\n        if (client.exp && client.exp < Date.now() / 1000) {\n            // Token has expired\n            this.removeSessionData(); // Remove the expired token            \n            throw new Error('Token Expired');\n        }\n        return client;\n    } catch (e) {\n        console.log(e.message);\n        window.location.href=GlobalVariables.homepage +\"/\"+ GlobalVariables.loginPage;\n        return null;\n    }\n  },\n  saveSessionData: function (clientData) {\n    const expInSeconds = (expirationHours+1) * 60 * 60;\n    const data = {\n      email: clientData.email,\n      exp: Math.floor(Date.now() / 1000) + expInSeconds,\n    };\n    var token = jwt.sign(data, credentials.jwt);\n    Cookies.set(cookieName, token, { expires: expirationHours / 24 }); // Set the cookie expiration in days\n  },\n  removeSessionData: function () {\n    Cookies.remove(cookieName);\n  },\n};\n\nexport default JWT_AUTH;\n","import GoogleLogin from  \"@stack-pulse/next-google-login\"\n\nimport saveToGoogleSheets from './func/saveToGoogleSheets'\n\nimport JWT_AUTH from \"./func/JWT_AUTH\"\nimport GlobalVariables from \"./func/GlobalVariables\";\n\nconst credentials = {\n  \"google\":process.env.REACT_APP_GOOGLE_CLIENTID,\n  \"jwt\":process.env.REACT_APP_JWT\n}\n\nfunction Login() {\n\n    function onLogin(googleResponse){\n        console.log(googleResponse);\n        var inseriu = saveToGoogleSheets(googleResponse.profileObj);\n        if(inseriu) alert(\"Ponto registrado\");\n        else alert(\"Falha no ponto\");\n\n        JWT_AUTH.saveSessionData(googleResponse.profileObj);\n        GlobalVariables.profileData = googleResponse.profileObj;\n        \n        window.location.href=GlobalVariables.homepage +\"/\"+ GlobalVariables.profilePage;\n    }\n    \n    const getSession = ()=>{\n      var client = JWT_AUTH.getSessionData();\n      if(client) window.location.href=GlobalVariables.homepage +\"/\"+ GlobalVariables.profilePage;\n    }\n  return (\n    <div className=\"GoogleLogin\">\n        <button onClick={()=>{JWT_AUTH.saveSessionData({\"email\":\"teste\"})}}>TESTE</button>\n        <GoogleLogin\n        clientId={credentials.google}\n        buttonText=\"Continue with Google\"\n        onSuccess={onLogin}\n        onFailure={console.log}\n        cookiePolicy={'single_host_origin'}\n        />\n        <button onClick={()=>{getSession()}}>TESTE2</button>\n        \n    </div>\n  );\n}\n\nexport default Login;\n","import '../App.css';\n\nfunction Header() {\n  return (\n    <div className=\"Header\">\n        <div className='espacamento'/>\n        <h1>Bater ponto na ECS</h1>\n        <div className='espacamento'/>\n    </div>\n  );\n}\n\nexport default Header;\n","import './App.css';\n\nimport Login from './components/Login';\nimport Header from './components/Header';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header/>\n      <Login/>\n    </div>\n  );\n}\n\nexport default App;\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE,\n  authDomain: \"myapp-d87de.firebaseapp.com\",\n  projectId: \"myapp-d87de\",\n  storageBucket: \"myapp-d87de.appspot.com\",\n  messagingSenderId: \"101658274836\",\n  appId: \"1:101658274836:web:364eb204ab277197d30b01\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nexport default app;","import React, { useState, useEffect } from \"react\";\nimport JWT_AUTH from \"./func/JWT_AUTH\";\nimport app from \"./func/firebase_setup\";\nimport { getDatabase, ref, get, set } from \"firebase/database\";\nimport GlobalVariables from \"./func/GlobalVariables\";\n\nconst db = getDatabase(app);\n\nfunction emailToHash(email) {\n  let hash = 0;\n\n  for (let i = 0; i < email.length; i++) {\n    const char = email.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n  }\n\n  return Math.abs(hash); // Convert to a positive number\n}\n\nconst Page = () => {\n  const [userData, setUserData] = useState(null);\n\n  useEffect(() => {\n    function getData() {\n      const client = JWT_AUTH.getSessionData();\n      if (!client) {\n        return;\n      }\n      const email = client.email;\n      const id = btoa(email);\n      const userPath=\"users/\" + id;\n      const userRef = ref(db, userPath);\n\n      get(userRef)\n        .then((snapshot) => {\n          if (snapshot.exists()) {\n            const data = snapshot.val();\n            setUserData(data);\n          } else {\n            console.log(\"No data available\");\n            const data = {\n              email: email,\n              name: GlobalVariables.profileData.name,              \n              profilePictureUrl: GlobalVariables.profileData.imageUrl,\n            };\n            const public_id=emailToHash(data.email);\n            data.public_id=public_id;\n            set(userRef, data);\n            const publicRef = ref(db,\"public_users/\"+public_id);\n            set(publicRef,{id:id})\n            \n            setUserData(data);\n          }\n        })\n        .catch((error) => {\n          console.error(\"Error fetching data:\", error);\n        });\n    }\n\n    getData();\n  }, []); // Empty dependency array to run this effect only once\n\n  return (\n    <div>\n      {userData ? (\n        <div>\n          <h2>Profile Information</h2>\n          <div>\n            <strong>Name:</strong> {userData.name}\n          </div>\n          <div>\n            <strong>Email:</strong> {userData.email}\n          </div>\n          <div>\n            <strong>Public Id:</strong> <a href={GlobalVariables.homepage+\"/\"+GlobalVariables.publicProfilePage+\"/\"+userData.public_id}>{userData.public_id}</a>\n          </div>\n          <div>\n            <img\n              src={userData.profilePictureUrl}\n              alt=\"Profile\"\n              style={{ maxWidth: \"100px\", maxHeight: \"100px\" }}\n            />\n          </div>\n        </div>\n      ) : (\n        <p>Loading profile data...</p>\n      )}\n    </div>\n  );\n};\n\nexport default Page;\n","import React, { useState, useEffect } from \"react\";\nimport app from \"./func/firebase_setup\";\nimport { getDatabase, ref, get } from \"firebase/database\";\nimport { useParams } from 'react-router-dom';\nimport GlobalVariables from \"./func/GlobalVariables\";\n\nconst db = getDatabase(app);\n\nconst Page = () => {\n    const { profile_id } = useParams();\n  const [userData, setUserData] = useState(null);\n\n  useEffect(() => {\n    function getData() {\n      const publicUserPath=\"public_users/\" + profile_id;\n      const publicUserRef = ref(db, publicUserPath);\n\n      get(publicUserRef)\n        .then((snapshot) => {\n          if (snapshot.exists()) {\n            const data = snapshot.val();\n            const userPath=\"users/\" + data.id;\n            const userRef = ref(db, userPath);\n            get(userRef)\n                .then((snapshot) => {\n                if (snapshot.exists()) {\n                    const data = snapshot.val();\n                    const {email, ...otherprops} = data;\n                    setUserData(otherprops);\n                } else {\n                    console.log(\"No data available\");\n                }\n                })\n                .catch((error) => {\n                console.error(\"Error fetching data:\", error);\n                });\n          } else {\n            console.log(\"No data available\");\n          }\n        })\n        .catch((error) => {\n          console.error(\"Error fetching data:\", error);\n        });\n    }\n\n    getData();\n  }, []); // Empty dependency array to run this effect only once\n\n  return (\n    <div>\n      {userData ? (\n        <div>\n          <h2>Profile Information</h2>\n          <div>\n            <strong>Name:</strong> {userData.name}\n          </div>\n          <div>\n            <img\n              src={userData.profilePictureUrl}\n              alt=\"Profile\"\n              style={{ maxWidth: \"100px\", maxHeight: \"100px\" }}\n            />\n          </div>\n        </div>\n      ) : (\n        <p>Loading profile data...</p>\n      )}\n    </div>\n  );\n};\n\nexport default Page;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom/client\";\nimport {\n  createHashRouter,\n  RouterProvider,\n} from \"react-router-dom\";\n\nimport './index.css';\nimport App from './App';\nimport Page from \"./components/Page\";\nimport PublicPage from \"./components/PublicPage\";\nimport GlobalVariables from \"./components/func/GlobalVariables\";\n\n// Set the initial hash value to '/#' when the application loads.\nif (window.location.hash === \"\") {\n  window.location.hash = \"/\";\n}\n\nconst router = createHashRouter([\n  {\n    path: \"/\",\n    element: <App />,\n  },\n  {\n    path: GlobalVariables.loginPage,\n    element: <App />\n  },\n  {\n    path: GlobalVariables.profilePage,\n    element: <Page />,\n  },\n  {\n    path: GlobalVariables.publicProfilePage,\n    element: <PublicPage />,\n  }\n]);\n\nReactDOM.createRoot(document.getElementById(\"root\")).render(\n  <React.StrictMode>\n    <RouterProvider router={router} />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}